[[Bash]]
[[2025-06-10]]

> [!important] 
> 
>### Procedimento para criar um arquivo .sh:
> 1. Crie uma arquivo usando `touch` no terminal, como por exemplo `touch arquivo.sh`
> 2. D√™ a permiss√£o de execu√ß√£o com o comando `chmod +x arquivo.sh`
> 3. Acesse o seu arquivo e insira um `shebang` (caminho para interpretador bash) para fazer com que o programa utilize o bash para esse arquivo. 
> 	1. Podemos determinar onde fica o caminho do interpretador bash com `which bash`
> 	2. Depois insira `#!<caminho_para_interpretador>` na primeira linha do arquivo
> 
> Para executar o arquivo, basta usar `./arquivo.sh` se estiver no mesmo diret√≥rio.

___

Podemos fazer um la√ßo atrav√©s de duas formas no bash com o comando `for`

O exemplo inclui:
```sh
for (( i = 10; i > 0; i-- ))
do
  echo $i
done
```
Esse c√≥digo define i = 10, e verifica se i √© menor que 0. Se n√£o for menor que 0, i ser√° subtra√≠do at√© que seja menor que 0.

O outro comando de loop √© `while` com seguinte sintaxe:
```sh
while [[ CONDITION ]]
do
  STATEMENTS
done
```

Por exemplo:
```sh
while [[ $I -ge 0 ]]
do
  echo $I
done
```


O outro comando semelhante a isso √© `until` que faz algo muito parecido com `while`.
```sh
until [[ CONDITION ]]
do
  STATEMENTS
done
```

___

`sleep` √© um comando de timer onde podemos inserir um tempo em segundo para o c√≥digo pausar por um instante.

Para inserir os coment√°rios, podemos fazer isso:
```sh
: '
  comment here
  more comment here
'
```

Podemos usar o `printenv` para ver todas as vari√°veis do environment no terminal
- N√£o somente isso, mas tamb√©m √© poss√≠vel utilizar essas vari√°veis do environment no script como usar $LANG.

`$RANDOM` permite inserir n√∫meros aleat√≥rios, e com operador `modulus` podemos inserir um intervalo/range dos n√∫meros.
- Por exemplo: `$RANDOM%75`, onde podemos limitar entre 1 a 75

> [!NOTE]
> 
> Observe em Bash, para usar a vari√°vel declarada, devemos usar `$` antes da vari√°vel. 
> - Por exemplo: $arg1

Os operadores do Bash:
```
        id++, id--      variable post-increment, post-decrement
        ++id, --id      variable pre-increment, pre-decrement
        -, +            unary minus, plus
        !, ~            logical and bitwise negation
        **              exponentiation
        *, /, %         multiplication, division, remainder
        +, -            addition, subtraction
        <<, >>          left and right bitwise shifts
        <=, >=, <, >    comparison
        ==, !=          equality, inequality
        &               bitwise AND
        ^               bitwise XOR
        |               bitwise OR
        &&              logical AND
        ||              logical OR
        expr ? expr : expr
                        conditional operator
        =, *=, /=, %=,
        +=, -=, <<=, >>=,
        &=, ^=, |=      assignment`
```

O comando `declare -p` pode ser usado para exibir uma lista de todas as vari√°veis, bem como visualizar os valores das vari√°veis como no exemplo abaixo:
- `declare -p J`: nesse exemplo, podemos visualizar o valor da vari√°vel `J`


O sintaxe ``$(( ... ))`` permite calcular as express√µes contidas dentro desses par√™nteses.


> [!NOTE]
> ### üü© `[[ ... ]]` ‚Äî Teste de condi√ß√£o (strings, arquivos, compara√ß√µes)
> 
> - Usado para **testar condi√ß√µes**, como comparar textos (strings) ou verificar se um arquivo existe.
>     
> - √â **mais moderno** e **mais seguro** do que `[ ... ]`.
>     
> 
> #### Exemplo 1: comparar strings
> ```sh
> nome="Amanda"
> if [[ "$nome" == "Amanda" ]]; then
>   echo "Oi, Amanda!"
> fi
> ```
> #### Exemplo 2: testar se um arquivo existe
> 
> ```sh
> if [[ -f "meuarquivo.txt" ]]; then
>   echo "O arquivo existe!"
> fi
> ```
> ---
> 
> ### üü¶ `(( ... ))` ‚Äî Opera√ß√µes com n√∫meros (aritm√©tica)
> 
> - Serve para **fazer contas** ou **comparar n√∫meros** (sem precisar de aspas).
>     
> - Funciona **s√≥ com n√∫meros**.
>     
> - Pode ser usado como um **if** tamb√©m.
>     
> 
> #### Exemplo 1: somar
> ```sh
> ((soma = 5 + 3))
> echo $soma  # Mostra 8
> 
> ```
> 
> #### Exemplo 2: compara√ß√£o num√©rica
> ```sh
> a=10
> b=5
> if (( a > b )); then
>   echo "a √© maior que b"
> fi
> ```
> 
> ---
> 
> ### üü® `$(( ... ))` ‚Äî Aritm√©tica tamb√©m, mas **retorna o valor**
> 
> - Tamb√©m faz **contas com n√∫meros**, mas serve para **usar o valor da conta como texto** (como se fosse uma "vari√°vel").
>     
> - Coloca-se o cifr√£o `$` para mostrar o resultado da conta.
>     
> 
> #### Exemplo:
> ```sh
> echo $((3 + 4))  # Mostra 7
> x=10
> y=2
> echo $((x * y))  # Mostra 20
> 
> ```
> ---
> 

 Compara√ß√£o r√°pida:

| C√≥digo       | Uso principal              | Funciona com | Exemplo                        |
| ------------ | -------------------------- | ------------ | ------------------------------ |
| `[[ ... ]]`  | Testar strings, arquivos   | Texto        | `[[ "$nome" == "Amanda" ]]`    |
| `(( ... ))`  | Fazer contas ou comparar   | N√∫meros      | `(( a > b ))`                  |
| `$(( ... ))` | Mostrar resultado da conta | N√∫meros      | `echo $((3 + 2))` ‚Üí mostra `5` |

Exemplos:
```sh
#!/bin/bash

# Program that counts down to zero from a given argument

echo -e "\n~~ Countdown Timer ~~\n"

if [[ $1 -gt 0 ]]
then
  : '
  for (( i = $1; i >= 0; i-- ))
  do
    echo $i
    sleep 1
  done
  '

  I=$1

  while [[ $I -ge 0 ]]
  do
    echo $I
    (( I-- ))
    sleep 1
  done
else
  echo Include a positive integer as the first argument.
fi

```

```sh
#!/bin/bash

# Bingo Number Generator

echo -e "\n~~ Bingo Number Generator ~~\n"

NUMBER=$(( RANDOM % 75 + 1 ))
TEXT="The next number is, "

if (( NUMBER <= 15 ))
then
  echo $TEXT B:$NUMBER
elif [[ $NUMBER -le 30 ]]
then
  echo $TEXT I:$NUMBER
elif (( NUMBER < 46 ))
then
  echo $TEXT N:$NUMBER
elif [[ $NUMBER -lt 61 ]]
then
  echo $TEXT G:$NUMBER
else
  echo $TEXT O:$NUMBER
fi
```

Podemos criar arrays em bash com `VARI√ÅVEL=(...)`.  O exemplo disso √©: `ARR=("a" "b" "c")`.
- Tamb√©m √© poss√≠vel acessar as vari√°veis dentro desse array ao usar esse sintaxe `${ARR[n√∫m]}`, de mesma maneira que os indexes e slicers do Python. 
- Se voc√™ acessar `echo ${ARR[0]}`, estamos acessando a vari√°vel `a` e assim por diante, pois o bash conta do zero.
- Tamb√©m √© poss√≠vel acessar todas as vari√°veis dentro do array com `echo ${ARR[@]}`



Pode-se criar tamb√©m pr√≥pria fun√ß√£o assim como no Python:
```sh
FUNCTION_NAME() {
  STATEMENTS
}
```

___
A express√£o "=~" permite  verificar se o texto avaliado cont√©m ou n√£o o que √© solicitado. Por exemplo:
```sh
[[ hello =~ el  ]]; echo $?
```
Essa express√£o avalia se cont√©m "el" no texto "hello"

Podemos tamb√©m verificar se o texto cont√©m "?" no final com essa express√£o:
```sh
[[ test? =~ \?$ ]]; echo $?
```

Exemplo:
```sh
#!/bin/bash

# Program to tell a persons fortune

echo -e "\n~~ Fortune Teller ~~\n"

RESPONSES=("Yes" "No" "Maybe" "Outlook good" "Don't count on it" "Ask again later")
N=$(( RANDOM % 6 ))

GET_FORTUNE() {

  if [[ ! $1 ]]
    then   echo Ask a yes or no question:
  else echo Try again. Make sure it ends with a question mark:
  fi
  read QUESTION
}

GET_FORTUNE

until [[ $QUESTION =~ \?$ ]]
do
  GET_FORTUNE again
done

echo -e "\n${RESPONSES[$N]}"

```

Podemos tamb√©m chamar os outros scripts dentro de um arquivo:
```sh
#!/bin/bash
#Program to run my other four programs

./questionnaire.sh
./countdown.sh 3
./bingo.sh
./fortune.sh

```

____
Podemos usar `cat <filename>` para imprimir o conte√∫do dentro de um arquivo. Por exemplo:
```sh
cat courses.csv
```

```sh
cat courses.csv | while read MAJOR COURSE
do
  <STATEMENTS>
done
```
Nesse c√≥digo, vamos formar um loop onde cada linha ser√° atribu√≠da a uma vari√°vel.

`IFS` √© uma vari√°vel usada para determinar a separa√ß√£o entre as palavras, podemos definir `IFS=","` para que possa usar a v√≠rgula como separador. 